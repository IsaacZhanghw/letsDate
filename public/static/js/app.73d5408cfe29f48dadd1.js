webpackJsonp([1],{0:function(e,t,s){s("j1ja"),e.exports=s("NHnr")},"2/9h":function(e,t,s){e.exports=s.p+"static/img/logo.90c527e.png"},G7pL:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=s("VU/8")({name:"app"},i,!1,function(e){s("G7pL")},null,null).exports,r=s("/ocq"),o=s("mvHQ"),c=s.n(o),u=s("//Fk"),l=s.n(u),d=s("mtWM"),p=s.n(d),v=s("mw3O"),m=s.n(v);function g(e,t,s){return new l.a(function(n,i){var a=t;"get"===e&&(a=a+"?"+m.a.stringify(s)),p.a[e](a,s).then(function(e){n(e.retobj)},function(e){i(e)}).catch(function(e){i(e)})})}p.a.defaults.timeout=5e3,p.a.defaults.baseURL="http://mp.weixin.lemonread.com/",p.a.interceptors.request.use(function(e){return"post"===e.method&&(e.data=m.a.stringify(e.data)),sessionStorage.getItem("token")&&(p.a.defaults.headers[e.method].Authorization=JSON.parse(sessionStorage.getItem("token"))),e},function(e){return console.log("error",e),l.a.reject(e)}),p.a.interceptors.response.use(function(e){return e.data.errcode?(console.log("返回错误",e.data.errmsg),l.a.reject(e)):e.data},function(e){return console.log("网络异常",e),l.a.reject(e)});var f=function(e){return g("get","/einkPurchase/checkCode",e)},h=function(e){return g("post","/einkPurchase/order",e)},_={name:"lemonTree",data:function(){return{showModal:!1,isMessage:!0,isDelivering:!1,isVerify:!1,user:{name:"",money:"998.00",phone:"",addresses:"",code:""},notice:"信息输入有误,请重新输入..."}},beforeMount:function(){},mounted:function(){},methods:{payment:function(){if(!this.user.name||!this.user.phone||!this.user.addresses)this.isMessage=!1,this.notice="信息输入有误,请重新输入...";else{/^[1][0-9]{10}$/.test(this.user.phone)?this.isMessage=!0:(this.isMessage=!1,this.notice="手机格式输入有误,请重新输入...")}this.showModal=!0},closeModal:function(){this.showModal=!1},cancel:function(){this.showModal=!1},affirm:function(){if(!this.$route.query)return this.isMessage=!1,void(this.notice="页面有误,请重试或联系客服人员...");var e={openId:this.$route.query.openid,name:this.user.name,phone:this.user.phone,shippingAddress:this.user.addresses,code:this.user.code},t=this;h(e).then(function(e){var s=e;if(s.errcode)return alert("付款失败1"),t.isMessage=!1,void(t.notice=err.data.errmsg+",请重试或联系客服人员...");function n(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s.appId,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign},function(e){var s=c()(e.err_msg);-1!=s.indexOf("get_brand_wcpay_request:ok")?(t.showModal=!1,t.isDelivering=!0):-1!=s.indexOf("get_brand_wcpay_request:cancel")?(t.isMessage=!1,t.notice="支付取消,请重试或联系客服人员..."):(t.isMessage=!1,t.notice="支付失败,请重试或联系客服人员...")})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()}).catch(function(e){t.isMessage=!1,t.notice=e.data.errmsg+",请重试或联系客服人员..."})},checkCode:function(){var e=this;if(this.showModal=!0,this.isMessage=!1,!this.user.code||this.user.code.length>20)this.notice="优惠码输入有误,请重新输入...";else if(this.$route.query){var t={code:this.user.code};f(t).then(function(t){var s=t;if(s.errcode)e.notice="验证失败,请重试或联系客服人员...";else if(e.notice="验证成功,请完善订单信息并付款...",setTimeout(function(){e.showModal=!1},1e3),e.isVerify=!0,"998.00"==e.user.money){var n=100*Number(e.user.money)-s.off;e.user.money=(n/100).toFixed(2)}}).catch(function(t){e.isMessage=!1,e.notice="验证失败,请重试或联系客服人员..."})}else this.notice="页面有误,请重试或联系客服人员..."}}},y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showModal?s("div",{staticClass:"modal"},[s("div",{staticClass:"mask",on:{click:e.closeModal}}),e._v(" "),s("div",{staticClass:"modal-content"},[e.isMessage?s("div",[s("p",{staticClass:"modal-title"},[e._v("订单信息确认")]),e._v(" "),s("p",[e._v("您的订单信息为:")]),e._v(" "),s("p",[e._v("购买商品: 小柠檬阅读器")]),e._v(" "),s("p",[e._v("商品价格: ¥"),s("span",{staticClass:"price"},[e._v(" "+e._s(e.user.money))]),e._v("/台")]),e._v(" "),s("p",[e._v("收货人: "+e._s(e.user.name))]),e._v(" "),s("p",[e._v("手机号码: "+e._s(e.user.phone))]),e._v(" "),s("p",[e._v("收货地址: "+e._s(e.user.addresses))]),e._v(" "),s("div",{staticClass:"affirm-box"},[s("button",{staticClass:"user-input submit-btn cancel-btn",attrs:{type:"button"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),s("button",{staticClass:"user-input submit-btn affirm-btn",attrs:{type:"button"},on:{click:e.affirm}},[e._v("确认付款")])])]):s("div",[s("p",[e._v(e._s(e.notice))])])])]):e._e(),e._v(" "),s("p",{staticClass:"pay-title"},[e._v("\n    小柠檬阅读器订单信息\n  ")]),e._v(" "),s("div",{staticClass:"pay-box"},[s("p",{staticClass:"title"},[e._v("\n      购买商品: 小柠檬阅读器\n    ")]),e._v(" "),s("p",{staticClass:"title"},[e._v("\n      商品价格: ¥"),s("span",{staticClass:"price"},[e._v(" "+e._s(e.user.money))]),e._v("/台\n    ")]),e._v(" "),e._m(0),e._v(" "),s("p",{staticClass:"title"},[e._v("\n      订单信息:\n    ")]),e._v(" "),s("div",{staticClass:"form-box"},[e.isDelivering?s("p",{staticClass:"user-delivering"},[e._v("小柠檬正在发货....")]):e._e(),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入收货人姓名",disabled:e.isDelivering},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.phone,expression:"user.phone"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入手机号码",disabled:e.isDelivering},domProps:{value:e.user.phone},on:{input:function(t){t.target.composing||e.$set(e.user,"phone",t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.addresses,expression:"user.addresses"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入收货地址",disabled:e.isDelivering},domProps:{value:e.user.addresses},on:{input:function(t){t.target.composing||e.$set(e.user,"addresses",t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.code,expression:"user.code"}],staticClass:"user-input user-sale",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入优惠码",disabled:e.isDelivering},domProps:{value:e.user.code},on:{input:function(t){t.target.composing||e.$set(e.user,"code",t.target.value)}}}),e._v(" "),s("button",{staticClass:"user-input sale-btn",class:e.isDelivering?"button-isDelivering":"",attrs:{type:"button",disabled:e.isDelivering},on:{click:e.checkCode}},[e._v("验证优惠码")]),e._v(" "),e.isVerify?s("p",{staticClass:"user-delivering"},[e._v("验证成功,请完善订单信息并付款...")]):e._e(),e._v(" "),s("button",{staticClass:"user-input submit-btn",class:e.isDelivering?"button-isDelivering":"",attrs:{type:"button",disabled:e.isDelivering},on:{click:e.payment}},[e._v("确认付款")])])]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-box"},[t("img",{staticClass:"lemon-img",attrs:{src:s("xVN8"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"foot-fill"},[t("img",{staticClass:"logo-img",attrs:{src:s("2/9h"),alt:""}})])}]};var b=s("VU/8")(_,y,!1,function(e){s("UYkj")},"data-v-88dc3778",null).exports;n.a.use(r.a);var C=new r.a({routes:[{path:"/",name:"",component:b},{path:"/lemonPay",name:"lemonPay",component:b}]}),M=s("NYxO");n.a.use(M.a);var w=new M.a.Store({state:{count:0},mutations:{increment:function(e){console.log(this),e.count++},decrement:function(e){return e.count--}}});function x(e,t){if(!t){window.sessionStorage.setItem(e,c()({}))}window.sessionStorage.setItem(e,c()(t))}function S(e){var t=window.sessionStorage.getItem(e);return t?""===t?{}:JSON.parse(t||"{}"):{}}function D(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function k(e){var t=e%3600/60;return Math.ceil(t)}function N(e){return parseInt(e/3600)}function j(e){var t=(e/3600).toFixed(2);return 0==t.substr(t.length-1,1)&&(t=t.slice(0,t.length-1)),t}function $(e){return e-60*(e/60)}function I(e){return parseInt(e/60)}var P={install:function(e,t){e.prototype.sessionSetObj=x,e.prototype.sessionGetObj=S,e.prototype.getRandom=D,e.prototype.readingNumToMinStr=k,e.prototype.readingNumToHourStr=N,e.prototype.readingNumToSecondStr=$,e.prototype.readingTotalNumToMinStr=I,e.prototype.toHourDecimalStr=j}};s("j1ja");n.a.config.productionTip=!1,n.a.use(P),new n.a({el:"#app",router:C,store:w,template:"<App/>",components:{App:a}})},UYkj:function(e,t){},xVN8:function(e,t,s){e.exports=s.p+"static/img/lemon.c78253a.png"}},[0]);
//# sourceMappingURL=app.73d5408cfe29f48dadd1.js.map