webpackJsonp([4],{Zrlr:function(o,e,t){"use strict";e.__esModule=!0,e.default=function(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}},dR9d:function(o,e){},unWt:function(o,e,t){"use strict";var n=t("Zrlr"),s=t.n(n),i=t("wxAW"),c=t.n(i),u=void 0,r=new(function(){function o(){s()(this,o),this.DB_NAME="dbName",this.OBJECT="Book"}return c()(o,[{key:"init",value:function(o){var e=this,t=indexedDB.open("dbName3",1);t.onerror=function(o){console.log("连接数据库失败")},t.onsuccess=function(o){console.log("连接数据库成功")},t.onupgradeneeded=function(o){o.target.result.createObjectStore(e.OBJECT,{keyPath:"id",autoIncrement:!1}),console.log("创建对象仓库成功")},t.onsuccess=function(t){var n=t.target.result;console.log("db",n);var s=n.transaction(e.OBJECT,"readwrite");u=s.objectStore(e.OBJECT),o&&o()}}},{key:"init2",value:function(){u.put({id:"2",userName:"asd",age:24});u.get("2").onsuccess=function(){},u.delete("2").onsuccess=function(){console.log("删除数据成功")}}},{key:"getBooks",value:function(o){var e=[];u.openCursor().onsuccess=function(t){var n=t.target.result;n?(e.push(n.value),n.continue()):o&&o(e)}}},{key:"getBook",value:function(o,e){u.get(o).onsuccess=function(o){console.log("getBook"),e&&e(o.target.result)}}},{key:"addBook",value:function(o,e){u.put(o).onsuccess=function(){console.log("保存成功"),e&&e()}}},{key:"deleteBook",value:function(o,e){u.delete(o).onsuccess=function(){console.log("删除数据成功"),e&&e()}}}]),o}());e.a=r},wxAW:function(o,e,t){"use strict";e.__esModule=!0;var n,s=t("C4MV"),i=(n=s)&&n.__esModule?n:{default:n};e.default=function(){function o(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(o,n.key,n)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}()},z6D6:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});t("f+26");var n=t("unWt"),s=t("vUDa"),i=window.ePub,c={components:{reviewsBackgroud:s.a},data:function(){return{reader:null,title:"epub 阅读器",books:[],bookTitle:"",bookCover:""}},mounted:function(){this.init()},destroyed:function(){},methods:{add:function(){document.getElementById("file").click()},init:function(){var o=this.sessionGetObj("bookInfo");console.log("bookInfo",o),this.bookTitle=o.bookName,this.bookCover=o.coverUrl,this.addBookFromUrl(o)},addBookFromUrl:function(o){this.book=i(o.bookUrl,{width:400,height:600,spreads:!1,restore:!0}),this.book.getMetadata().then(function(e){console.log("getMetadata"),console.log("meta",e),n.a.init(function(){n.a.addBook({type:"link",id:o.bookId,name:e.bookTitle,author:e.creator,content:o.bookUrl},function(){n.a.getBooks(function(o){console.log("获取所有书籍"),console.log(o)})})})})}}},u={render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"page-home"},[t("div",{staticClass:"book-box"},[t("p",[o._v(o._s(o.bookTitle))]),o._v(" "),t("img",{staticClass:"cover",attrs:{src:o.bookCover}})]),o._v(" "),t("router-link",{staticClass:"link",attrs:{to:"/bookReading"}},[o._v("\n    开始阅读\n  ")]),o._v(" "),t("reviews-backgroud")],1)},staticRenderFns:[]};var r=t("VU/8")(c,u,!1,function(o){t("dR9d")},"data-v-15c6e150",null);e.default=r.exports}});