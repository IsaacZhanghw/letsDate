webpackJsonp([1],{PZiw:function(e,s){},ozZN:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("mvHQ"),n=t.n(i),a=t("f+26"),r={metaInfo:{title:"订单填写"},data:function(){return{showModal:!1,isMessage:!0,isDelivering:!1,isVerify:!1,user:{name:"",money:"998.00",phone:"",addresses:"",code:""},notice:"信息输入有误,请重新输入..."}},beforeMount:function(){},mounted:function(){},methods:{payment:function(){if(!this.user.name||!this.user.phone||!this.user.addresses)this.isMessage=!1,this.notice="信息输入有误,请重新输入...";else{/^[1][0-9]{10}$/.test(this.user.phone)?this.isMessage=!0:(this.isMessage=!1,this.notice="手机格式输入有误,请重新输入...")}this.showModal=!0},closeModal:function(){this.showModal=!1},cancel:function(){this.showModal=!1},affirm:function(){if(!this.$route.query)return this.isMessage=!1,void(this.notice="页面有误,请重试或联系客服人员...");var e={openId:this.$route.query.openid,name:this.user.name,phone:this.user.phone,shippingAddress:this.user.addresses,code:this.user.code,baseUrl:"http://mp.weixin.lemonread.com/"};2==this.$route.query.typeId&&(e.typeId=2);var s=this;a.a.payment(e).then(function(e){var t=e;if(t.errcode)return s.isMessage=!1,void(s.notice=err.data.errmsg+",请重试或联系客服人员...");function i(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(e){var t=n()(e.err_msg);-1!=t.indexOf("get_brand_wcpay_request:ok")?(s.showModal=!1,s.isDelivering=!0):-1!=t.indexOf("get_brand_wcpay_request:cancel")?(s.isMessage=!1,s.notice="支付取消,请重试或联系客服人员..."):(s.isMessage=!1,s.notice="支付失败,请重试或联系客服人员...")})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}).catch(function(e){s.isMessage=!1,s.notice=e.data.errmsg+",请重试或联系客服人员..."})},checkCode:function(){var e=this;if(this.showModal=!0,this.isMessage=!1,!this.user.code||this.user.code.length>20)this.notice="优惠码输入有误,请重新输入...";else if(this.$route.query){var s={code:this.user.code,baseUrl:"http://mp.weixin.lemonread.com/"};a.a.checkCode(s).then(function(s){var t=s;if(t.errcode)e.notice="验证失败,请重试或联系客服人员...";else if(e.notice="验证成功,请完善订单信息并付款...",setTimeout(function(){e.showModal=!1},1e3),e.isVerify=!0,"998.00"==e.user.money){var i=100*Number(e.user.money)-t.off;e.user.money=(i/100).toFixed(2)}}).catch(function(s){e.isMessage=!1,e.notice="验证失败,请重试或联系客服人员..."})}else this.notice="页面有误,请重试或联系客服人员..."}}},o={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.showModal?t("div",{staticClass:"modal"},[t("div",{staticClass:"mask",on:{click:e.closeModal}}),e._v(" "),t("div",{staticClass:"modal-content"},[e.isMessage?t("div",[t("p",{staticClass:"modal-title"},[e._v("订单信息确认")]),e._v(" "),t("p",[e._v("您的订单信息为:")]),e._v(" "),t("p",[e._v("购买商品: 小柠檬阅读器")]),e._v(" "),t("p",[e._v("商品价格: ¥"),t("span",{staticClass:"price"},[e._v(" "+e._s(e.user.money))]),e._v("/台")]),e._v(" "),t("p",[e._v("收货人: "+e._s(e.user.name))]),e._v(" "),t("p",[e._v("手机号码: "+e._s(e.user.phone))]),e._v(" "),t("p",[e._v("收货地址: "+e._s(e.user.addresses))]),e._v(" "),t("div",{staticClass:"affirm-box"},[t("button",{staticClass:"user-input submit-btn cancel-btn",attrs:{type:"button"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("button",{staticClass:"user-input submit-btn affirm-btn",attrs:{type:"button"},on:{click:e.affirm}},[e._v("确认付款")])])]):t("div",[t("p",[e._v(e._s(e.notice))])])])]):e._e(),e._v(" "),t("p",{staticClass:"pay-title"},[e._v("\n    小柠檬阅读器订单信息\n  ")]),e._v(" "),t("div",{staticClass:"pay-box"},[t("p",{staticClass:"title"},[e._v("\n      购买商品: 小柠檬阅读器\n    ")]),e._v(" "),t("p",{staticClass:"title"},[e._v("\n      商品价格: ¥"),t("span",{staticClass:"price"},[e._v(" "+e._s(e.user.money))]),e._v("/台\n    ")]),e._v(" "),e._m(0),e._v(" "),t("p",{staticClass:"title"},[e._v("\n      订单信息:\n    ")]),e._v(" "),t("div",{staticClass:"form-box"},[e.isDelivering?t("p",{staticClass:"user-delivering"},[e._v("小柠檬正在发货....")]):e._e(),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入收货人姓名",disabled:e.isDelivering},domProps:{value:e.user.name},on:{input:function(s){s.target.composing||e.$set(e.user,"name",s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.phone,expression:"user.phone"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入手机号码",disabled:e.isDelivering},domProps:{value:e.user.phone},on:{input:function(s){s.target.composing||e.$set(e.user,"phone",s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.addresses,expression:"user.addresses"}],staticClass:"user-input",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入收货地址",disabled:e.isDelivering},domProps:{value:e.user.addresses},on:{input:function(s){s.target.composing||e.$set(e.user,"addresses",s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.code,expression:"user.code"}],staticClass:"user-input user-sale",class:e.isDelivering?"input-isDelivering":"",attrs:{placeholder:"请输入优惠码",disabled:e.isDelivering},domProps:{value:e.user.code},on:{input:function(s){s.target.composing||e.$set(e.user,"code",s.target.value)}}}),e._v(" "),t("button",{staticClass:"user-input sale-btn",class:e.isDelivering?"button-isDelivering":"",attrs:{type:"button",disabled:e.isDelivering},on:{click:e.checkCode}},[e._v("验证优惠码")]),e._v(" "),e.isVerify?t("p",{staticClass:"user-delivering"},[e._v("验证成功,请完善订单信息并付款...")]):e._e(),e._v(" "),t("button",{staticClass:"user-input submit-btn",class:e.isDelivering?"button-isDelivering":"",attrs:{type:"button",disabled:e.isDelivering},on:{click:e.payment}},[e._v("确认付款")])])]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"img-box"},[s("img",{staticClass:"lemon-img",attrs:{src:"static/pay/lemon.png",alt:""}})])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"foot-fill"},[s("img",{staticClass:"logo-img",attrs:{src:"static/pay/logo.png",alt:""}})])}]};var c=t("VU/8")(r,o,!1,function(e){t("PZiw")},"data-v-32aa7d01",null);s.default=c.exports}});